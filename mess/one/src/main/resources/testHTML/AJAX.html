<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XMLHttpRequest_基础使用</title>
</head>
<body>
<p class="my-p"></p>
<script>
    // 发送 get请求
    // 创建 XMLHttpRequest()
    const xhr = new XMLHttpRequest();
    xhr.open('GET','http://hmajax.itheima.net/api/province')

    xhr.addEventListener('loadend',()=>{
        console.log(xhr.response)
        const data = JSON.parse(xhr.response)
        console.log(data.list.join('<br>'))
        document.querySelector('.my-p').innerHTML = data.list.join('<br>')
    });

    // 4. 发起请求
    xhr.send()
// xhr发送post请求
     /**
     * 目标：使用xhr进行数据提交-完成注册功能
     */
    document.querySelector('.reg-btn').addEventListener('click', () => {
        const xhr = new XMLHttpRequest()
        xhr.open('POST', 'http://hmajax.itheima.net/api/register')
        xhr.addEventListener('loadend', () => {
            console.log(xhr.response)
        })

        // 设置请求头-告诉服务器内容类型（JSON字符串）
        xhr.setRequestHeader('Content-Type', 'application/json')
        // 准备提交的数据
        const userObj = {
            username: 'itheima007',
            password: '7654321'
        }
        const userStr = JSON.stringify(userObj)
        // 设置请求体，发起请求
        xhr.send(userStr)
    })

</script>

</body>
</html>
