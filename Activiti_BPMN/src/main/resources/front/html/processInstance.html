<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>流程定义列表</title>



</head>
<body>

<div id="app">
    <button @click="getData">获取数据</button>
    <div class="block">
        <span class="demonstration">hover 触发子菜单</span>
        <el-cascader
                v-model="value"
                :options="options"
                :props="{ expandTrigger: 'hover' }"
                @change="handleChange"></el-cascader>
    </div>
</div>
<script src="../js/vue.js"></script>
<script src="../api/axios.js"></script>
<!-- 引入样式 -->
<link rel="stylesheet" href="../ui/lib-2.15.6/theme-chalk/index.css">
<!-- 引入组件库 -->
<script src="../ui/lib-2.15.6/index.js"></script>
<script>
    new Vue({
        el: '#app',
        data() {
            return {
                vos: [],
                value: [],
                options: [{
                    value: 'zhinan',
                    label: '指南',
                    children: [{
                        value: 'shejiyuanze',
                        label: '设计原则',
                        children: [{
                            value: 'yizhi',
                            label: '一致'
                        }, {
                            value: 'fankui',
                            label: '反馈'
                        }, {
                            value: 'xiaolv',
                            label: '效率'
                        }, {
                            value: 'kekong',
                            label: '可控'
                        }]
                    }]
                }]
            }
        },
        methods: {

            getData() {
                axios.get('http://localhost:40155/system/baseInfo/queryIndustryType'
                    ).then(res => {
                    let list = res.data.data.industryType
                    const selector = (arr) =>{
                        const res = [];
                        for(let index in arr ){
                            const i = arr[index]
                            const obj = {
                                label: i.name,
                                value: i.id
                            }
                            if(i.hasChild === 1){
                                const child = selector(i.normIndustryList)
                                obj.children=child;
                            }
                            res.push(obj);

                        }
                        return res;
                    }
                    let dispose = selector(list)
                    console.log('处理好的数据',dispose)
                    this.options = dispose;
                })
            },
            handleChange(value) {
                console.log(value);
            }
        }
    })
</script>
</body>
</html>